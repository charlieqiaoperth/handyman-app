(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){e.exports=a(414)},227:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n=a(34),r=a.n(n),l=a(1),c=a.n(l),o=a(8),s=a.n(o),i=a(427),m=(a(226),a(227),a(228),a(229),a(27)),u=a(28),d=a(30),p=a(29),h=a(31),E=a(201),f=a(428),b=a(429);function g(e){return r.a.get("/orders/".concat(e)).then(function(e){return e.data}).catch(function(e){if(e.response){var t=e.response;throw new Error("".concat(t.status,": ").concat(t.statusText))}throw new Error("Some error occurred")})}var v=a(416),y=a(417),k=a(419),j=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).columns=[{title:"ID",dataIndex:"_id",key:"id",render:function(e,t){return c.a.createElement("span",null,c.a.createElement(v.a,{to:{pathname:"/orders/management/".concat(e)}},e))}},{title:"Status",dataIndex:"status",key:"status"},{title:"Customer",dataIndex:"customer.customerName",key:"customer"},{title:"Business",dataIndex:"business.businessName",key:"business"},{title:"Service Type",dataIndex:"category.name",key:"category"},{title:"Action",dataIndex:"_id",key:"action",render:function(e,t){return c.a.createElement("span",null,c.a.createElement(v.a,{to:{pathname:"/orders/management/edit/".concat(e)}},"Edit"),c.a.createElement(y.a,{type:"vertical"}),c.a.createElement("a",{href:"#",onClick:function(t){a.deleteRecord(e)}},"Delete"))}}],a.deleteRecord=function(e){var t;window.confirm("Do you want to delete this order ?")&&(t=e,r.a.delete("/orders/".concat(t))).then(function(e){a.location.reload()}).catch(function(e){console.log(e)})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(k.a,{columns:this.columns,dataSource:this.props.orders}),",")}}]),t}(c.a.Component),O=a(87),S=a(421),C=a(37),w=a(76),I=a(43),x=a(423),F=a(422),A=O.a.Option,R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},a.handleReset=function(){a.props.form.resetFields()},a.handleAddNewOrder=function(){a.props.match.params.id;a.props.history.push({pathname:"/orders/management/edit/new"})},a.formGet=function(){var e=a.props.form.getFieldDecorator;return c.a.createElement(S.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onSubmit:a.handleSearch}),c.a.createElement(C.a,{type:"primary",onClick:a.handleAddNewOrder},"Add New order"),c.a.createElement(w.a,{gutter:4},c.a.createElement(I.a,{span:6},c.a.createElement(S.a.Item,{label:"key word",hasFeedback:!0},e("key")(c.a.createElement(x.a,{placeholder:"key word"})))),c.a.createElement(I.a,{span:6},c.a.createElement(S.a.Item,{label:"By Sort",hasFeedback:!0},e("sort")(c.a.createElement(O.a,{placeholder:"Please select which name"},c.a.createElement(A,{value:"status"},"Order Status"),c.a.createElement(A,{value:"createdAt"},"Creation Time"),c.a.createElement(A,{value:"grade"},"Rate"))))),c.a.createElement(I.a,{span:6},c.a.createElement(S.a.Item,{label:"Results"},e("pageSize")(c.a.createElement(F.a,{min:10,max:50,marks:{10:"10",15:"15",20:"20",30:"30",50:"50"}}))))),c.a.createElement(w.a,null,c.a.createElement(I.a,{gutter:2,span:4,style:{textAlign:"right"}},c.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Search"),c.a.createElement(C.a,{onClick:a.handleReset},"Clear"))),c.a.createElement("div",null,c.a.createElement(j,{orders:a.state.orders})))},a.state={isFetching:!1,orders:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0,error:null}),r.a.get("/orders?pageSize=15?page=1",{}).then(function(e){return e}).then(function(t){console.log(t.data),e.setState({orders:t.data}),console.log(e.state.orders)}).catch(function(t){e.setState({isFetching:!1,error:t})})}},{key:"render",value:function(){return c.a.createElement(this.formGet,null)}}]),t}(c.a.Component),P=S.a.create({name:"advanced_search"})(R),D=a(418),_=a(139),B=a(11),T=D.a.Header,L=D.a.Footer,M=D.a.Sider,N=D.a.Content,q=_.b.SubMenu,H=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(D.a,null,c.a.createElement(M,{width:256,style:{minHeight:"100vh"},breakpoint:"md",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)}},c.a.createElement("div",{style:{height:"32px",background:"rgba(255,255,255,.2)",margin:"16px"}}),c.a.createElement(_.b,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},c.a.createElement(_.b.Item,{key:"1"},c.a.createElement(v.a,{to:"/"},c.a.createElement(B.a,{type:"pie-chart"}),c.a.createElement("span",null,"Home"))),c.a.createElement(_.b.Item,{key:"2"},c.a.createElement(v.a,{to:"/customers/management"},"Customers")),c.a.createElement(_.b.Item,{key:"3"},c.a.createElement(v.a,{to:"/businesses/management"},"Businesses")),c.a.createElement(_.b.Item,{key:"4"},c.a.createElement(v.a,{to:"/orders/management"},"Orders")),c.a.createElement(_.b.Item,{key:"5"},c.a.createElement(v.a,{to:"/categories/management"},"Categories")),c.a.createElement(q,{key:"sub5",title:c.a.createElement("span",null,c.a.createElement(B.a,{type:"dashboard"}),c.a.createElement("span",null,"Admin User"))},c.a.createElement(_.b.Item,{key:"6"},c.a.createElement(v.a,{to:"/admin/login"},"Login")),c.a.createElement(_.b.Item,{key:"7"},c.a.createElement(v.a,{to:"/admin/setting"},"Setting"))))),c.a.createElement(D.a,null,c.a.createElement(T,{style:{background:"#fff",textAlign:"center",padding:0}},c.a.createElement("div",null,c.a.createElement("h2",null,"Welcome to JR Handyman CMS"))),c.a.createElement(N,{style:{margin:"24px 16px 0"}},c.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},this.props.children)),c.a.createElement(L,{style:{textAlign:"center"}},"Handyman CMS by JR"))))}}]),t}(l.Component),z=function(){return c.a.createElement("h1",null,"Admin user setting Page")},J=function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("h1",null,"DEMO"))},G=a(425),U=a(420),V=G.a.Step,W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).style={margin:"30px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2)",border:"1px solid #e8e8e8"},a.stepOrder=function(e){var t=["booking","accepted","finished"].indexOf(e);return c.a.createElement(G.a,{size:"small",current:t},c.a.createElement(V,{title:"Booking"}),c.a.createElement(V,{title:"Accepted"}),c.a.createElement(V,{title:"Finished"}))},a.handleEdit=function(){var e=a.props.match.params.id;a.props.history.push({pathname:"/orders/management/edit/".concat(e)})},a.state={isFetching:!1,order:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({isFetching:!0,error:null}),g(t).then(function(t){e.setState({order:t})}).catch(function(t){e.setState({isFetching:!1,error:t})})}},{key:"render",value:function(){return c.a.createElement(U.a,{title:this.stepOrder(this.state.order.status),style:this.style,actions:[c.a.createElement("a",{onClick:this.handleEdit},"EDIT"),c.a.createElement("a",null,"DELETE")]},c.a.createElement("div",{style:{background:"#ECECEC",padding:"10px"}},c.a.createElement(w.a,{gutter:5},c.a.createElement(I.a,{span:12},c.a.createElement(U.a,{title:"Customer",bordered:!1},c.a.createElement("div",null,"CustomerName"))),c.a.createElement(I.a,{span:12},c.a.createElement(U.a,{title:"Business",bordered:!1},"BusinessName")))),c.a.createElement("div",null,"jobLocation"),c.a.createElement("div",null,"Comments"),c.a.createElement("div",null,"Service Rate"))}}]),t}(c.a.Component),K=a(105),Q=a(426),X=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n;e||(n=t,r.a.post("/orders",n)).then(function(){a.setState({isSaving:!1}),a.props.history.replace("/orders/management")}).catch(function(e){a.setState({isSaving:!1,error:e})})})},a.handleCancel=function(){a.props.history.replace("/orders/management")},a.state={order:[],isSaving:!1,isFetching:!1,error:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;console.log(t),this.setState({isFetching:!0,error:null}),g(t).then(function(t){console.log(t),e.setState({order:t}),console.log(e.state.order)}).then(function(t){var a=e.state.order;console.log(a),e.props.form.setFieldsValue({status:"".concat(a.status),comments:"".concat(a.comments),customer:"".concat(a.customer._id),business:"".concat(a.business._id),category:"".concat(a.category._id),jobLocation:"".concat(a.jobLocation),grade:"".concat(a.grade)})}).catch(function(t){e.setState({isFetching:!1,error:t})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement(S.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),c.a.createElement(S.a.Item,{label:"Customer Id",hasFeedback:!0},e("customer",{rules:[{required:!0,message:"Please fill customerObjectId!"}]})(c.a.createElement(x.a,{placeholder:"Please fill customerObjectId"}))),c.a.createElement(S.a.Item,{label:"Business Id",hasFeedback:!0},e("business",{rules:[{required:!0,message:"Please fill businessObjectId!"}]})(c.a.createElement(x.a,{placeholder:"Please fill businessObjectId"}))),c.a.createElement(S.a.Item,{label:"Service type",hasFeedback:!0},e("category",{rules:[{required:!0,message:"Please fill categoryObjectId!"}]})(c.a.createElement(x.a,{placeholder:"Please fill categoryObjectId"}))),c.a.createElement(S.a.Item,{label:"Status"},e("status",{rules:[{required:!0}]})(c.a.createElement(K.a.Group,null,c.a.createElement(K.a,{value:"booking"},"Booking"),c.a.createElement(K.a,{value:"accepted"},"Accepted"),c.a.createElement(K.a,{value:"finished"},"Finished")))),c.a.createElement(S.a.Item,{label:"JobLocation",hasFeedback:!0},e("jobLocation",{initialValue:" "})(c.a.createElement(x.a.TextArea,{rows:2,placeholder:"Please fill the job Location"}))),c.a.createElement(S.a.Item,{label:"Grade"},e("grade",{initialValue:0})(c.a.createElement(Q.a,null))),c.a.createElement(S.a.Item,{label:"Service Comments",hasFeedback:!0},e("comments",{initialValue:" "})(c.a.createElement(x.a.TextArea,{rows:2,placeholder:"Please fill service comments"}))),c.a.createElement(S.a.Item,{wrapperCol:{span:12,offset:6}},c.a.createElement(w.a,{gutter:8},c.a.createElement(I.a,{span:8},c.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Submit")),c.a.createElement(I.a,{span:8},c.a.createElement(C.a,{type:"primary",onClick:this.handleCancel},"Cancel")))))}}]),t}(c.a.Component),Y=S.a.create({name:"validate_edit"})(X),Z=a(424),$=(D.a.Header,D.a.Footer,D.a.Sider,D.a.Content),ee=(_.b.SubMenu,function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(D.a,null,c.a.createElement(D.a,null,c.a.createElement($,{style:{margin:"24px 16px 0"}},c.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},this.props.children))))}}]),t}(l.Component));function te(){var e=localStorage.jwt_token;return e&&(r.a.defaults.headers.common.Authorization="Bearer ".concat(e)),!!e}var ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){var n;e||((n=t,r.a.post("/auth",n).then(function(e){var t=e.data;return localStorage.setItem("jwt_token",t.token),r.a.defaults.headers.common.Authorization="Bearer ".concat(localStorage.jwt_token),t})).then(function(e){a.setState({isFetching:!1}),a.props.history.push("/")}),console.log("Received values of form: ",t))})},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields(function(t,n){var l;t||(l=n,r.a.post("/users",l).then(function(e){var t=e.data;return localStorage.setItem("jwt_token",t.token),r.a.defaults.headers.common.Authorization="Bearer ".concat(localStorage.jwt_token),t})).then(function(e){a.setState({visible:!1})}).catch(function(e){console.log(e.response.data),alert(e.response.data)}),console.log("Received values of form: ",n),e.resetFields()})},a.saveFormRef=function(e){a.formRef=e},a.state={isFetching:!1,visible:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement(ee,null,c.a.createElement(re,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate}),c.a.createElement(w.a,null,c.a.createElement(I.a,{span:8,offset:8},c.a.createElement(S.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(S.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(c.a.createElement(x.a,{prefix:c.a.createElement(B.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),c.a.createElement(S.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(c.a.createElement(x.a,{prefix:c.a.createElement(B.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),c.a.createElement(S.a.Item,null,c.a.createElement(w.a,{gutter:6,span:24,justify:"space-around"},c.a.createElement(I.a,{span:24},c.a.createElement(C.a,{type:"primary",htmlType:"submit",block:!0},"Log in")),c.a.createElement(I.a,{span:12},c.a.createElement("a",{className:"login-form-forgot",href:""},c.a.createElement("span",null,"Forgot password"))),c.a.createElement(I.a,{span:12},"Or ",c.a.createElement("a",{href:"#",onClick:this.showModal},c.a.createElement("span",null,"register now!")))))))))}}]),t}(c.a.Component),ne=S.a.create({name:"normal_login"})(ae),re=S.a.create({name:"form_in_modal"})(function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form.getFieldDecorator;return c.a.createElement(Z.a,{visible:t,title:"Create a new admin user",okText:"Create",onCancel:a,onOk:n},c.a.createElement(S.a,{layout:"vertical"},c.a.createElement(S.a.Item,{label:"Username"},r("username",{rules:[{required:!0,message:"Please input username"}]})(c.a.createElement(x.a,null))),c.a.createElement(S.a.Item,{label:"Password"},r("password",{rules:[{required:!0,message:"Please input password"}]})(c.a.createElement(x.a,{type:"password"})))))}}]),t}(c.a.Component)),le=ne,ce=function(){return c.a.createElement("div",null,!te()&&c.a.createElement(f.a,{exact:!0,path:"/login",component:le}),te()&&c.a.createElement(H,null,c.a.createElement(oe,{exact:!0,path:"/",component:J}),c.a.createElement(oe,{exact:!0,path:"/orders/management",component:P}),c.a.createElement(oe,{exact:!0,path:"/orders/management/edit/:id",component:Y}),c.a.createElement(oe,{exact:!0,path:"/orders/management/:id",component:W}),c.a.createElement(oe,{exact:!0,path:"/admin/setting",component:z}),c.a.createElement(f.a,{exact:!0,path:"/admin/login",component:le}),c.a.createElement(b.a,{path:"/"})))},oe=function(e){var t=e.component,a=Object(E.a)(e,["component"]);return c.a.createElement(f.a,Object.assign({},a,{render:function(e){return te()?c.a.createElement(t,e):c.a.createElement(b.a,{to:{pathname:"/admin/login",state:{from:e.location}}})}}))},se=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(ce,null))}}]),t}(l.Component);r.a.defaults.baseURL="https://handyman-cms.herokuapp.com/api";s.a.render(c.a.createElement(i.a,{basename:"."},c.a.createElement(se,null)),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.19800ca0.chunk.js.map